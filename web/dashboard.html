<script>
    if (!sessionStorage.getItem('auth') || sessionStorage.getItem('role') !== 'admin') {
        window.location.href = 'login';
    }
</script>
<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard - Gresto</title>
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Modern navbar with refined styling -->
    <nav class="navbar navbar-modern">
        <div class="navbar-left">
            <!-- Added burger menu button for mobile -->
            <button id="burger-menu-btn" class="burger-menu-btn" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="navbar-brand">Gresto Admin</div>
        </div>
        <div class="navbar-right">
            <!-- Added theme toggle to dashboard -->
            <button id="theme-toggle-nav" class="theme-toggle-nav">ðŸŒ™</button>
            <span class="navbar-user">Admin</span>
            <a class="btn-logout" href="logout">Logout</a>
        </div>
    </nav>

    <div class="dashboard-container">
        <!-- Modernized sidebar navigation -->
        <nav class="sidebar-modern">
            <div class="sidebar-nav">
                <a href="dashboard" class="nav-link active">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="shop" class="nav-link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <span>Shop</span>
                </a>
                <a href="logout" class="nav-link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    <span>Logout</span>
                </a>
            </div>
        </nav>

        <!-- Main content with refined layout -->
        <main class="main-content">
            <div class="content-header">
                <h1>Dashboard Overview</h1>
                <p class="content-subtitle">Welcome back, Admin</p>
            </div>

            <!-- Modern stat cards with icons -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon revenue">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z">
                            </path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <h6 class="stat-label">Total Revenue</h6>
                        <h2 id="stat-revenue" class="stat-value">0 TND</h2>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon transactions">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2V17zm4 0h-2V7h2V17zm4 0h-2v-4h2V17z">
                            </path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <h6 class="stat-label">Transactions</h6>
                        <h2 id="stat-orders" class="stat-value">0</h2>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon alerts">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <h6 class="stat-label">Alerts</h6>
                        <h2 id="stat-alerts" class="stat-value">0</h2>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon server">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="8"></circle>
                            <path d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z" fill="none"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <h6 class="stat-label">Server Status</h6>
                        <h2 id="stat-server" class="stat-value online">Online</h2>
                    </div>
                </div>
            </div>

            <!-- Charts and data sections with refined styling -->
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="card-header">
                        <h3>Orders (Last 7 Days)</h3>
                    </div>
                    <div class="card-body">
                        <ul id="orders-today" class="data-list"></ul>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="card-header">
                        <h3>Popular Dishes</h3>
                    </div>
                    <div class="card-body">
                        <ul id="popular-dishes" class="data-list"></ul>
                    </div>
                </div>
                <div style="grid-column: 1 / -1; display: flex; justify-content: flex-end;">
                    <select id="dashboard-range" class="filter-select" style="width: auto;">
                        <option value="day">Aujourd'hui</option>
                        <option value="month" selected>Ce mois</option>
                        <option value="year">Cette annÃ©e</option>
                    </select>
                </div>

                <!-- Low stars section -->
                <div class="table-card" id="low-stars-section">
                    <div class="card-header">
                        <h3>Avis Ã  faible note (â‰¤3â˜…)</h3>
                    </div>
                    <div class="card-body">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Client</th>
                                    <th>Plat</th>
                                    <th>Note</th>
                                    <th>Commentaire</th>
                                </tr>
                            </thead>
                            <tbody id="low-stars-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Recent orders table with modern styling -->
            <div class="table-card">
                <div class="card-header">
                    <h3>Recent Orders</h3>
                </div>
                <div class="card-body">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Total</th>
                                <th>Server</th>
                                <th>Items</th>
                            </tr>
                        </thead>
                        <tbody id="recent-orders-body"></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script src="/dashboard.js"></script>
</body>

</html>