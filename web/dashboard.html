<script>
    if (!sessionStorage.getItem('auth') && !document.cookie.includes('PHPSESSID')) {
       // Ideally you check via a small fetch, but this is a basic frontend guard
    }
</script>
<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard - Gresto</title>
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-modern">
        <div class="navbar-left">
            <button id="burger-menu-btn" class="burger-menu-btn" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="navbar-brand">Gresto Admin</div>
        </div>
        <div class="navbar-right">
            <button id="theme-toggle-nav" class="theme-toggle-nav">üåô</button>
            <span class="navbar-user">Admin</span>
            <a class="btn-logout" href="logout">Logout</a>
        </div>
    </nav>

    <div class="dashboard-container">
        <nav class="sidebar-modern">
            <ul class="nav-links">
                <li><a href="dashboard.html" class="nav-link active">Dashboard</a></li>
                <li><a href="shop" class="nav-link">Menu</a></li>
                <li><a href="logout" class="nav-link">D√©connexion</a></li>
            </ul>
        </nav>

        <main class="content-area">
            <header class="dashboard-header">
                <div>
                    <h1>Vue d'ensemble</h1>
                    <p class="subtitle">Bienvenue sur votre tableau de bord</p>
                </div>
                
                <div class="header-controls">
                    <a href="cam.html" target="_blank" class="btn-cam">
                        <span class="icon">üìπ</span> 
                        <span>Cam√©ra Live</span>
                    </a>

                    <div class="period-selector-container">
                        <span class="period-label">P√©riode :</span>
                        <div class="period-selector" id="period-selector">
                            <button class="period-btn" data-value="day">Jour</button>
                            <button class="period-btn active" data-value="month">Mois</button>
                            <button class="period-btn" data-value="year">Ann√©e</button>
                        </div>
                    </div>
                </div>
            </header>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon revenue-icon">üí∞</div>
                    <div class="stat-info">
                        <h3>Revenu</h3>
                        <p class="stat-value" id="stat-revenue">-- TND</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon orders-icon">üì¶</div>
                    <div class="stat-info">
                        <h3>Commandes</h3>
                        <p class="stat-value" id="stat-orders">--</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon alerts-icon">‚ö†Ô∏è</div>
                    <div class="stat-info">
                        <h3>Alertes (‚òÖ‚â§3)</h3>
                        <p class="stat-value" id="stat-alerts">--</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon server-icon">üü¢</div>
                    <div class="stat-info">
                        <h3>Status</h3>
                        <p class="stat-value" id="stat-server">En ligne</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="grid-column">
                    <div class="card">
                        <div class="card-header">
                            <h3>7 derniers jours</h3>
                        </div>
                        <ul class="data-list" id="orders-today">
                            </ul>
                    </div>
                </div>

                <div class="grid-column">
                    <div class="card">
                        <div class="card-header">
                            <h3>Plats Populaires</h3>
                        </div>
                        <ul class="data-list" id="popular-dishes">
                            </ul>
                    </div>
                </div>

                <div class="grid-column full-width">
                    <div class="table-card">
                        <div class="card-header warning-header">
                            <h3>Avis Critiques (‚â§ 3 √©toiles)</h3>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Client</th>
                                        <th>Plat</th>
                                        <th>Note</th>
                                        <th>Commentaire</th>
                                    </tr>
                                </thead>
                                <tbody id="low-stars-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="grid-column full-width">
                    <div class="table-card">
                        <div class="card-header">
                            <h3>Commandes R√©centes</h3>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Client</th>
                                        <th>Total</th>
                                        <th>Serveur</th>
                                        <th>D√©tails</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-orders-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/dashboard.js"></script>
</body>
</html>